import{g as qt,r as U,w as Pt,o as et,O as nt,W as B,ao as Bt,j as x,ap as xe,aq as q,ar as rt,F as Le,as as ke,x as J,Q as Re,P as De,J as O,ab as Fe}from"./vendor.6bf135c8.js";import{b as Ue,c as $e,d as ze,e as Ve}from"./index.a2bcdef1.js";const Oe={class:"relative overflow-hidden h-full w-full rounded"},He=qt({props:{min:{type:Number,default:0},max:{type:Number,default:100},secondary:{type:Number,default:0},modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=U(),o=U(!1),s=U(0);Ue("mouseup",()=>o.value=!1);const i=$e(n,"modelValue",e),{elementX:a,elementWidth:u}=ze(r);return Pt([o,a],()=>{const c=Math.max(0,Math.min(1,a.value/u.value));s.value=c*n.max,o.value&&(i.value=s.value)}),(c,h)=>(et(),nt("div",{ref_key:"scrubber",ref:r,class:"relative h-2 rounded cursor-pointer select-none bg-black dark:bg-white dark:bg-opacity-10 bg-opacity-20",onMousedown:h[0]||(h[0]=y=>o.value=!0)},[B("div",Oe,[B("div",{class:"h-full absolute opacity-30 left-0 top-0 bg-emerald-700 w-full rounded",style:Bt({transform:`translateX(${t.secondary/t.max*100-100}%)`})},null,4),B("div",{class:"relative h-full w-full bg-emerald-500 rounded",style:Bt({transform:`translateX(${x(i)/t.max*100-100}%)`})},null,4)]),B("div",{class:q(["absolute inset-0 hover:opacity-100 opacity-0",{"!opacity-100":o.value}])},[xe(c.$slots,"default",{pendingValue:s.value,position:`${Math.max(0,Math.min(x(a),x(u)))}px`})],2)],544))}});function Gt(t,e,n,r=o=>o){return t*r(.5-e*(.5-n))}function Ke(t){return[-t[0],-t[1]]}function $(t,e){return[t[0]+e[0],t[1]+e[1]]}function F(t,e){return[t[0]-e[0],t[1]-e[1]]}function z(t,e){return[t[0]*e,t[1]*e]}function Je(t,e){return[t[0]/e,t[1]/e]}function ot(t){return[t[1],-t[0]]}function Ye(t,e){return t[0]*e[0]+t[1]*e[1]}function je(t,e){return t[0]===e[0]&&t[1]===e[1]}function qe(t){return Math.hypot(t[0],t[1])}function Ge(t){return t[0]*t[0]+t[1]*t[1]}function Qt(t,e){return Ge(F(t,e))}function Xt(t){return Je(t,qe(t))}function Qe(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function st(t,e,n){let r=Math.sin(n),o=Math.cos(n),s=t[0]-e[0],i=t[1]-e[1],a=s*o-i*r,u=s*r+i*o;return[a+e[0],u+e[1]]}function At(t,e,n){return $(t,z(F(e,t),n))}function Wt(t,e,n){return $(t,z(e,n))}var{min:G,PI:Xe}=Math,Zt=.275,it=Xe+1e-4;function We(t,e={}){let{size:n=16,smoothing:r=.5,thinning:o=.5,simulatePressure:s=!0,easing:i=C=>C,start:a={},end:u={},last:c=!1}=e,{cap:h=!0,taper:y=0,easing:p=C=>C*(2-C)}=a,{cap:l=!0,taper:f=0,easing:v=C=>--C*C*C+1}=u;if(t.length===0||n<=0)return[];let S=t[t.length-1].runningLength,w=Math.pow(n*r,2),E=[],g=[],m=t.slice(0,10).reduce((C,T)=>{let M=T.pressure;if(s){let P=G(1,T.distance/n),St=G(1,1-P);M=G(1,C+(St-C)*(P*Zt))}return(C+M)/2},t[0].pressure),b=Gt(n,o,t[t.length-1].pressure,i),d,_=t[0].vector,I=t[0].point,L=I,A=I,k=L;for(let C=0;C<t.length;C++){let{pressure:T}=t[C],{point:M,vector:P,distance:St,runningLength:tt}=t[C];if(C<t.length-1&&S-tt<3)continue;if(o){if(s){let K=G(1,St/n),Mt=G(1,1-K);T=G(1,m+(Mt-m)*(K*Zt))}b=Gt(n,o,T,i)}else b=n/2;d===void 0&&(d=b);let Ie=tt<y?p(tt/y):1,Te=S-tt<f?v((S-tt)/f):1;if(b=Math.max(.01,b*Math.min(Ie,Te)),C===t.length-1){let K=z(ot(P),b);E.push(F(M,K)),g.push($(M,K));continue}let Jt=t[C+1].vector,Yt=Ye(P,Jt);if(Yt<0){let K=z(ot(_),b);for(let Mt=1/13,dt=0;dt<=1;dt+=Mt)A=st(F(M,K),M,it*dt),E.push(A),k=st($(M,K),M,it*-dt),g.push(k);I=A,L=k;continue}let jt=z(ot(At(Jt,P,Yt)),b);A=F(M,jt),(C<=1||Qt(I,A)>w)&&(E.push(A),I=A),k=$(M,jt),(C<=1||Qt(L,k)>w)&&(g.push(k),L=k),m=T,_=P}let D=t[0].point.slice(0,2),N=t.length>1?t[t.length-1].point.slice(0,2):$(t[0].point,[1,1]),_t=[],ht=[];if(t.length===1){if(!(y||f)||c){let C=Wt(D,Xt(ot(F(D,N))),-(d||b)),T=[];for(let M=1/13,P=M;P<=1;P+=M)T.push(st(C,D,it*2*P));return T}}else{if(!(y||f&&t.length===1))if(h)for(let T=1/13,M=T;M<=1;M+=T){let P=st(g[0],D,it*M);_t.push(P)}else{let T=F(E[0],g[0]),M=z(T,.5),P=z(T,.51);_t.push(F(D,M),F(D,P),$(D,P),$(D,M))}let C=ot(Ke(t[t.length-1].vector));if(f||y&&t.length===1)ht.push(N);else if(l){let T=Wt(N,C,b);for(let M=1/29,P=M;P<1;P+=M)ht.push(st(T,N,it*3*P))}else ht.push($(N,z(C,b)),$(N,z(C,b*.99)),F(N,z(C,b*.99)),F(N,z(C,b)))}return E.concat(ht,g.reverse(),_t)}function Ze(t,e={}){var n;let{streamline:r=.5,size:o=16,last:s=!1}=e;if(t.length===0)return[];let i=.15+(1-r)*.85,a=Array.isArray(t[0])?t:t.map(({x:l,y:f,pressure:v=.5})=>[l,f,v]);if(a.length===2){let l=a[1];a=a.slice(0,-1);for(let f=1;f<5;f++)a.push(At(a[0],l,f/4))}a.length===1&&(a=[...a,[...$(a[0],[1,1]),...a[0].slice(2)]]);let u=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,h=0,y=u[0],p=a.length-1;for(let l=1;l<a.length;l++){let f=s&&l===p?a[l].slice(0,2):At(y.point,a[l],i);if(je(y.point,f))continue;let v=Qe(f,y.point);if(h+=v,l<p&&!c){if(h<o)continue;c=!0}y={point:f,pressure:a[l][2]>=0?a[l][2]:.5,vector:Xt(F(y.point,f)),distance:v,runningLength:h},u.push(y)}return u[0].vector=((n=u[1])==null?void 0:n.vector)||[0,0],u}function tn(t,e={}){return We(Ze(t,e),e)}var en=tn,nn=Object.defineProperty,te=Object.getOwnPropertySymbols,rn=Object.prototype.hasOwnProperty,on=Object.prototype.propertyIsEnumerable,ee=(t,e,n)=>e in t?nn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nt=(t,e)=>{for(var n in e||(e={}))rn.call(e,n)&&ee(t,n,e[n]);if(te)for(var n of te(e))on.call(e,n)&&ee(t,n,e[n]);return t};var sn=()=>({events:{},emit(t,...e){(this.events[t]||[]).forEach(n=>n(...e))},on(t,e){return(this.events[t]=this.events[t]||[]).push(e),()=>this.events[t]=(this.events[t]||[]).filter(n=>n!==e)}});function ft(t,e){return t-e}function an(t){return t<0?-1:1}function gt(t){return[Math.abs(t),an(t)]}function ne(){const t=()=>((1+Math.random())*65536|0).toString(16).substring(1);return`${t()+t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`}var un=2,H=un,at=class{constructor(t){this.drauu=t,this.event=void 0,this.point=void 0,this.start=void 0,this.el=null}onStart(t){}onMove(t){return!1}onEnd(t){}get brush(){return this.drauu.brush}get shiftPressed(){return this.drauu.shiftPressed}get altPressed(){return this.drauu.altPressed}getMousePosition(t){var e,n;const r=this.drauu.el,o=(e=this.drauu.options.coordinateScale)!=null?e:1;if(this.drauu.options.coordinateTransform===!1){const s=this.drauu.el.getBoundingClientRect();return{x:(t.pageX-s.left)*o,y:(t.pageY-s.top)*o,pressure:t.pressure}}else{const s=this.drauu.svgPoint;s.x=t.clientX,s.y=t.clientY;const i=s.matrixTransform((n=r.getScreenCTM())==null?void 0:n.inverse());return{x:i.x*o,y:i.y*o,pressure:t.pressure}}}createElement(t,e){var n;const r=document.createElementNS("http://www.w3.org/2000/svg",t),o=e?Nt(Nt({},this.brush),e):this.brush;return r.setAttribute("fill",(n=o.fill)!=null?n:"transparent"),r.setAttribute("stroke",o.color),r.setAttribute("stroke-width",o.size.toString()),r.setAttribute("stroke-linecap","round"),o.dasharray&&r.setAttribute("stroke-dasharray",o.dasharray),r}attr(t,e){this.el.setAttribute(t,typeof e=="string"?e:e.toFixed(H))}_setEvent(t){this.event=t,this.point=this.getMousePosition(t)}_eventDown(t){return this._setEvent(t),this.start=this.point,this.onStart(this.point)}_eventMove(t){return this._setEvent(t),this.onMove(this.point)}_eventUp(t){return this._setEvent(t),this.onEnd(this.point)}},ln=class extends at{constructor(){super(...arguments);this.points=[]}onStart(t){return this.el=document.createElementNS("http://www.w3.org/2000/svg","path"),this.points=[t],this.attr("fill",this.brush.color),this.attr("d",this.getSvgData(this.points)),this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&this.points.push(t),this.attr("d",this.getSvgData(this.points)),!0}onEnd(){const t=this.el;return this.el=null,!!t}getSvgData(t){const e=en(t,Nt({size:this.brush.size*2,thinning:.9,simulatePressure:!1,start:{taper:5},end:{taper:5}},this.brush.stylusOptions));if(!e.length)return"";const n=e.reduce((r,[o,s],i,a)=>{const[u,c]=a[(i+1)%a.length];return r.push(o,s,(o+u)/2,(s+c)/2),r},["M",...e[0],"Q"]);return n.push("Z"),n.map(r=>typeof r=="number"?r.toFixed(2):r).join(" ")}},cn=class extends at{onStart(t){return this.el=this.createElement("ellipse"),this.attr("cx",t.x),this.attr("cy",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,n]=gt(t.x-this.start.x),[r,o]=gt(t.y-this.start.y);if(this.shiftPressed){const s=Math.min(e,r);e=s,r=s}if(this.altPressed)this.attr("cx",this.start.x),this.attr("cy",this.start.y),this.attr("rx",e),this.attr("ry",r);else{const[s,i]=[this.start.x,this.start.x+e*n].sort(ft),[a,u]=[this.start.y,this.start.y+r*o].sort(ft);this.attr("cx",(s+i)/2),this.attr("cy",(a+u)/2),this.attr("rx",(i-s)/2),this.attr("ry",(u-a)/2)}return!0}onEnd(){const t=this.el;return this.el=null,!(!t||!t.getTotalLength())}};function re(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","defs"),r=document.createElementNS("http://www.w3.org/2000/svg","marker"),o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("fill",e),r.setAttribute("id",t),r.setAttribute("viewBox","0 -5 10 10"),r.setAttribute("refX","5"),r.setAttribute("refY","0"),r.setAttribute("markerWidth","4"),r.setAttribute("markerHeight","4"),r.setAttribute("orient","auto"),o.setAttribute("d","M0,-5L10,0L0,5"),r.appendChild(o),n.appendChild(r),n}var hn=class extends at{onStart(t){if(this.el=this.createElement("line",{fill:"transparent"}),this.attr("x1",t.x),this.attr("y1",t.y),this.attr("x2",t.x),this.attr("y2",t.y),this.brush.arrowEnd){const e=ne(),n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.append(re(e,this.brush.color)),n.append(this.el),this.attr("marker-end",`url(#${e})`),n}return this.el}onMove(t){if(!this.el)return!1;let{x:e,y:n}=t;if(this.shiftPressed){const r=t.x-this.start.x,o=t.y-this.start.y;if(o!==0){let s=r/o;s=Math.round(s),Math.abs(s)<=1?(e=this.start.x+o*s,n=this.start.y+o):(e=this.start.x+r,n=this.start.y)}}return this.altPressed?(this.attr("x1",this.start.x*2-e),this.attr("y1",this.start.y*2-n),this.attr("x2",e),this.attr("y2",n)):(this.attr("x1",this.start.x),this.attr("y1",this.start.y),this.attr("x2",e),this.attr("y2",n)),!0}onEnd(){const t=this.el;return this.el=null,!(!t||t.getTotalLength()<5)}},dn=class extends at{onStart(t){return this.el=this.createElement("rect"),this.brush.cornerRadius&&(this.attr("rx",this.brush.cornerRadius),this.attr("ry",this.brush.cornerRadius)),this.attr("x",t.x),this.attr("y",t.y),this.el}onMove(t){if(!this.el||!this.start)return!1;let[e,n]=gt(t.x-this.start.x),[r,o]=gt(t.y-this.start.y);if(this.shiftPressed){const s=Math.min(e,r);e=s,r=s}if(this.altPressed)this.attr("x",this.start.x-e),this.attr("y",this.start.y-r),this.attr("width",e*2),this.attr("height",r*2);else{const[s,i]=[this.start.x,this.start.x+e*n].sort(ft),[a,u]=[this.start.y,this.start.y+r*o].sort(ft);this.attr("x",s),this.attr("y",a),this.attr("width",i-s),this.attr("height",u-a)}return!0}onEnd(){const t=this.el;return this.el=null,!(!t||!t.getTotalLength())}};function fn(t,e){const n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function gn(t,e,n){let r=e.x,o=e.y,s=n.x-r,i=n.y-o;if(s!==0||i!==0){const a=((t.x-r)*s+(t.y-o)*i)/(s*s+i*i);a>1?(r=n.x,o=n.y):a>0&&(r+=s*a,o+=i*a)}return s=t.x-r,i=t.y-o,s*s+i*i}function mn(t,e){let n=t[0];const r=[n];let o;for(let s=1,i=t.length;s<i;s++)o=t[s],fn(o,n)>e&&(r.push(o),n=o);return n!==o&&o&&r.push(o),r}function It(t,e,n,r,o){let s=r,i=0;for(let a=e+1;a<n;a++){const u=gn(t[a],t[e],t[n]);u>s&&(i=a,s=u)}s>r&&(i-e>1&&It(t,e,i,r,o),o.push(t[i]),n-i>1&&It(t,i,n,r,o))}function pn(t,e){const n=t.length-1,r=[t[0]];return It(t,0,n,e,r),r.push(t[n]),r}function oe(t,e,n=!1){if(t.length<=2)return t;const r=e!==void 0?e*e:1;return t=n?t:mn(t,r),t=pn(t,r),t}var wn=class extends at{constructor(){super(...arguments);this.points=[],this.count=0}onStart(t){if(this.el=this.createElement("path",{fill:"transparent"}),this.points=[t],this.brush.arrowEnd){this.arrowId=ne();const e=re(this.arrowId,this.brush.color);this.el.appendChild(e)}return this.el}onMove(t){return this.el||this.onStart(t),this.points[this.points.length-1]!==t&&(this.points.push(t),this.count+=1),this.count>5&&(this.points=oe(this.points,1,!0),this.count=0),this.attr("d",ie(this.points)),!0}onEnd(){const t=this.el;return this.el=null,!(!t||(t.setAttribute("d",ie(oe(this.points,1,!0))),!t.getTotalLength()))}};function yn(t,e){const n=e.x-t.x,r=e.y-t.y;return{length:Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),angle:Math.atan2(r,n)}}function se(t,e,n,r){const o=e||t,s=n||t,i=.2,a=yn(o,s),u=a.angle+(r?Math.PI:0),c=a.length*i,h=t.x+Math.cos(u)*c,y=t.y+Math.sin(u)*c;return{x:h,y}}function vn(t,e,n){const r=se(n[e-1],n[e-2],t),o=se(t,n[e-1],n[e+1],!0);return`C ${r.x.toFixed(H)},${r.y.toFixed(H)} ${o.x.toFixed(H)},${o.y.toFixed(H)} ${t.x.toFixed(H)},${t.y.toFixed(H)}`}function ie(t){return t.reduce((e,n,r,o)=>r===0?`M ${n.x.toFixed(H)},${n.y.toFixed(H)}`:`${e} ${vn(n,r,o)}`,"")}function bn(t){return{draw:new wn(t),stylus:new ln(t),line:new hn(t),rectangle:new dn(t),ellipse:new cn(t)}}var En=class{constructor(t={}){this.options=t,this.el=null,this.svgPoint=null,this.eventEl=null,this.shiftPressed=!1,this.altPressed=!1,this.drawing=!1,this._emitter=sn(),this._models=bn(this),this._undoStack=[],this._disposables=[],this.options.brush||(this.options.brush={color:"black",size:3,mode:"stylus"}),t.el&&this.mount(t.el,t.eventTarget)}get model(){return this._models[this.mode]}get mounted(){return!!this.el}get mode(){return this.options.brush.mode||"stylus"}set mode(t){this.options.brush.mode=t}get brush(){return this.options.brush}set brush(t){this.options.brush=t}resolveSelector(t){return typeof t=="string"?document.querySelector(t):t||null}mount(t,e){if(this.el)throw new Error("[drauu] already mounted, unmount previous target first");if(this.el=this.resolveSelector(t),!this.el)throw new Error("[drauu] target element not found");if(this.el.tagName.toLocaleLowerCase()!=="svg")throw new Error("[drauu] can only mount to a SVG element");if(!this.el.createSVGPoint)throw new Error("[drauu] SVG element must be create by document.createElementNS('http://www.w3.org/2000/sv', 'svg')");this.svgPoint=this.el.createSVGPoint();const n=this.resolveSelector(e)||this.el,r=this.eventStart.bind(this),o=this.eventMove.bind(this),s=this.eventEnd.bind(this),i=this.eventKeyboard.bind(this);n.addEventListener("pointerdown",r,{passive:!1}),window.addEventListener("pointermove",o,{passive:!1}),window.addEventListener("pointerup",s,{passive:!1}),window.addEventListener("pointercancel",s,{passive:!1}),window.addEventListener("keydown",i,!1),window.addEventListener("keyup",i,!1),this._disposables.push(()=>{n.removeEventListener("pointerdown",r),window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),window.removeEventListener("keydown",i,!1),window.removeEventListener("keyup",i,!1)}),this._emitter.emit("mounted")}unmount(){this._disposables.forEach(t=>t()),this._disposables.length=0,this.el=null,this._emitter.emit("unmounted")}on(t,e){return this._emitter.on(t,e)}undo(){const t=this.el;return t.lastElementChild?(this._undoStack.push(t.lastElementChild.cloneNode(!0)),t.lastElementChild.remove(),this._emitter.emit("changed"),!0):!1}redo(){return this._undoStack.length?(this.el.appendChild(this._undoStack.pop()),this._emitter.emit("changed"),!0):!1}canRedo(){return!!this._undoStack.length}canUndo(){var t;return!!((t=this.el)==null?void 0:t.lastElementChild)}eventMove(t){!this.acceptsInput(t)||!this.drawing||this.model._eventMove(t)&&(t.stopPropagation(),t.preventDefault(),this._emitter.emit("changed"))}eventStart(t){!this.acceptsInput(t)||(t.stopPropagation(),t.preventDefault(),this._currentNode&&this.cancel(),this.drawing=!0,this._emitter.emit("start"),this._currentNode=this.model._eventDown(t),this._currentNode&&this.el.appendChild(this._currentNode),this._emitter.emit("changed"))}eventEnd(t){if(!this.acceptsInput(t)||!this.drawing)return;const e=this.model._eventUp(t);e?(e instanceof Element&&e!==this._currentNode&&(this._currentNode=e),this.commit()):this.cancel(),this.drawing=!1,this._emitter.emit("end"),this._emitter.emit("changed")}acceptsInput(t){return!this.options.acceptsInputTypes||this.options.acceptsInputTypes.includes(t.pointerType)}eventKeyboard(t){this.shiftPressed===t.shiftKey&&this.altPressed===t.altKey||(this.shiftPressed=t.shiftKey,this.altPressed=t.altKey,this.model.point&&this.model.onMove(this.model.point)&&this._emitter.emit("changed"))}commit(){this._undoStack.length=0;const t=this._currentNode;this._currentNode=void 0,this._emitter.emit("committed",t)}clear(){this._undoStack.length=0,this.cancel(),this.el.innerHTML="",this._emitter.emit("changed")}cancel(){this._currentNode&&(this.el.removeChild(this._currentNode),this._currentNode=void 0,this._emitter.emit("canceled"))}dump(){return this.el.innerHTML}load(t){this.clear(),this.el.innerHTML=t}};function Cn(t){return new En(t)}function Tt(t){this.message=t}Tt.prototype=new Error,Tt.prototype.name="InvalidCharacterError";typeof window!="undefined"&&window.atob&&window.atob.bind(window);function ae(t){this.message=t}ae.prototype=new Error,ae.prototype.name="InvalidTokenError";var _n=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},ue={},R={};let xt;const Sn=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];R.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};R.getSymbolTotalCodewords=function(e){return Sn[e]};R.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};R.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');xt=e};R.isKanjiModeEnabled=function(){return typeof xt!="undefined"};R.toSJIS=function(e){return xt(e)};var mt={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(r){return r&&typeof r.bit!="undefined"&&r.bit>=0&&r.bit<4},t.from=function(r,o){if(t.isValid(r))return r;try{return e(r)}catch{return o}}})(mt);function le(){this.buffer=[],this.length=0}le.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Mn=le;function ut(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ut.prototype.set=function(t,e,n,r){const o=t*this.size+e;this.data[o]=n,r&&(this.reservedBit[o]=!0)};ut.prototype.get=function(t,e){return this.data[t*this.size+e]};ut.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};ut.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Pn=ut,ce={};(function(t){const e=R.getSymbolSize;t.getRowColCoords=function(r){if(r===1)return[];const o=Math.floor(r/7)+2,s=e(r),i=s===145?26:Math.ceil((s-13)/(2*o-2))*2,a=[s-7];for(let u=1;u<o-1;u++)a[u]=a[u-1]-i;return a.push(6),a.reverse()},t.getPositions=function(r){const o=[],s=t.getRowColCoords(r),i=s.length;for(let a=0;a<i;a++)for(let u=0;u<i;u++)a===0&&u===0||a===0&&u===i-1||a===i-1&&u===0||o.push([s[a],s[u]]);return o}})(ce);var he={};const Bn=R.getSymbolSize,de=7;he.getPositions=function(e){const n=Bn(e);return[[0,0],[n-de,0],[0,n-de]]};var fe={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const s=o.size;let i=0,a=0,u=0,c=null,h=null;for(let y=0;y<s;y++){a=u=0,c=h=null;for(let p=0;p<s;p++){let l=o.get(y,p);l===c?a++:(a>=5&&(i+=e.N1+(a-5)),c=l,a=1),l=o.get(p,y),l===h?u++:(u>=5&&(i+=e.N1+(u-5)),h=l,u=1)}a>=5&&(i+=e.N1+(a-5)),u>=5&&(i+=e.N1+(u-5))}return i},t.getPenaltyN2=function(o){const s=o.size;let i=0;for(let a=0;a<s-1;a++)for(let u=0;u<s-1;u++){const c=o.get(a,u)+o.get(a,u+1)+o.get(a+1,u)+o.get(a+1,u+1);(c===4||c===0)&&i++}return i*e.N2},t.getPenaltyN3=function(o){const s=o.size;let i=0,a=0,u=0;for(let c=0;c<s;c++){a=u=0;for(let h=0;h<s;h++)a=a<<1&2047|o.get(c,h),h>=10&&(a===1488||a===93)&&i++,u=u<<1&2047|o.get(h,c),h>=10&&(u===1488||u===93)&&i++}return i*e.N3},t.getPenaltyN4=function(o){let s=0;const i=o.data.length;for(let u=0;u<i;u++)s+=o.data[u];return Math.abs(Math.ceil(s*100/i/5)-10)*e.N4};function n(r,o,s){switch(r){case t.Patterns.PATTERN000:return(o+s)%2==0;case t.Patterns.PATTERN001:return o%2==0;case t.Patterns.PATTERN010:return s%3==0;case t.Patterns.PATTERN011:return(o+s)%3==0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(s/3))%2==0;case t.Patterns.PATTERN101:return o*s%2+o*s%3==0;case t.Patterns.PATTERN110:return(o*s%2+o*s%3)%2==0;case t.Patterns.PATTERN111:return(o*s%3+(o+s)%2)%2==0;default:throw new Error("bad maskPattern:"+r)}}t.applyMask=function(o,s){const i=s.size;for(let a=0;a<i;a++)for(let u=0;u<i;u++)s.isReserved(u,a)||s.xor(u,a,n(o,u,a))},t.getBestMask=function(o,s){const i=Object.keys(t.Patterns).length;let a=0,u=1/0;for(let c=0;c<i;c++){s(c),t.applyMask(c,o);const h=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(c,o),h<u&&(u=h,a=c)}return a}})(fe);var pt={};const Y=mt,wt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],yt=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];pt.getBlocksCount=function(e,n){switch(n){case Y.L:return wt[(e-1)*4+0];case Y.M:return wt[(e-1)*4+1];case Y.Q:return wt[(e-1)*4+2];case Y.H:return wt[(e-1)*4+3];default:return}};pt.getTotalCodewordsCount=function(e,n){switch(n){case Y.L:return yt[(e-1)*4+0];case Y.M:return yt[(e-1)*4+1];case Y.Q:return yt[(e-1)*4+2];case Y.H:return yt[(e-1)*4+3];default:return}};var ge={},vt={};const lt=new Uint8Array(512),bt=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)lt[n]=e,bt[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)lt[n]=lt[n-255]})();vt.log=function(e){if(e<1)throw new Error("log("+e+")");return bt[e]};vt.exp=function(e){return lt[e]};vt.mul=function(e,n){return e===0||n===0?0:lt[bt[e]+bt[n]]};(function(t){const e=vt;t.mul=function(r,o){const s=new Uint8Array(r.length+o.length-1);for(let i=0;i<r.length;i++)for(let a=0;a<o.length;a++)s[i+a]^=e.mul(r[i],o[a]);return s},t.mod=function(r,o){let s=new Uint8Array(r);for(;s.length-o.length>=0;){const i=s[0];for(let u=0;u<o.length;u++)s[u]^=e.mul(o[u],i);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(r){let o=new Uint8Array([1]);for(let s=0;s<r;s++)o=t.mul(o,new Uint8Array([1,e.exp(s)]));return o}})(ge);const me=ge;function Lt(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Lt.prototype.initialize=function(e){this.degree=e,this.genPoly=me.generateECPolynomial(this.degree)};Lt.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const r=me.mod(n,this.genPoly),o=this.degree-r.length;if(o>0){const s=new Uint8Array(this.degree);return s.set(r,o),s}return r};var An=Lt,pe={},j={},kt={};kt.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var V={};const we="[0-9]+",Nn="[A-Z $%*+\\-./:]+";let ct="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ct=ct.replace(/u/g,"\\u");const In="(?:(?![A-Z0-9 $%*+\\-./:]|"+ct+`)(?:.|[\r
]))+`;V.KANJI=new RegExp(ct,"g");V.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");V.BYTE=new RegExp(In,"g");V.NUMERIC=new RegExp(we,"g");V.ALPHANUMERIC=new RegExp(Nn,"g");const Tn=new RegExp("^"+ct+"$"),xn=new RegExp("^"+we+"$"),Ln=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");V.testKanji=function(e){return Tn.test(e)};V.testNumeric=function(e){return xn.test(e)};V.testAlphanumeric=function(e){return Ln.test(e)};(function(t){const e=kt,n=V;t.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,i){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?s.ccBits[0]:i<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(s,i){if(t.isValid(s))return s;try{return r(s)}catch{return i}}})(j);(function(t){const e=R,n=pt,r=mt,o=j,s=kt,i=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,a=e.getBCHDigit(i);function u(p,l,f){for(let v=1;v<=40;v++)if(l<=t.getCapacity(v,f,p))return v}function c(p,l){return o.getCharCountIndicator(p,l)+4}function h(p,l){let f=0;return p.forEach(function(v){f+=c(v.mode,l)+v.getBitsLength()}),f}function y(p,l){for(let f=1;f<=40;f++)if(h(p,f)<=t.getCapacity(f,l,o.MIXED))return f}t.from=function(l,f){return s.isValid(l)?parseInt(l,10):f},t.getCapacity=function(l,f,v){if(!s.isValid(l))throw new Error("Invalid QR Code version");typeof v=="undefined"&&(v=o.BYTE);const S=e.getSymbolTotalCodewords(l),w=n.getTotalCodewordsCount(l,f),E=(S-w)*8;if(v===o.MIXED)return E;const g=E-c(v,l);switch(v){case o.NUMERIC:return Math.floor(g/10*3);case o.ALPHANUMERIC:return Math.floor(g/11*2);case o.KANJI:return Math.floor(g/13);case o.BYTE:default:return Math.floor(g/8)}},t.getBestVersionForData=function(l,f){let v;const S=r.from(f,r.M);if(Array.isArray(l)){if(l.length>1)return y(l,S);if(l.length===0)return 1;v=l[0]}else v=l;return u(v.mode,v.getLength(),S)},t.getEncodedBits=function(l){if(!s.isValid(l)||l<7)throw new Error("Invalid QR Code version");let f=l<<12;for(;e.getBCHDigit(f)-a>=0;)f^=i<<e.getBCHDigit(f)-a;return l<<12|f}})(pe);var ye={};const Rt=R,ve=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,kn=1<<14|1<<12|1<<10|1<<4|1<<1,be=Rt.getBCHDigit(ve);ye.getEncodedBits=function(e,n){const r=e.bit<<3|n;let o=r<<10;for(;Rt.getBCHDigit(o)-be>=0;)o^=ve<<Rt.getBCHDigit(o)-be;return(r<<10|o)^kn};var Ee={};const Rn=j;function Q(t){this.mode=Rn.NUMERIC,this.data=t.toString()}Q.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Q.prototype.getLength=function(){return this.data.length};Q.prototype.getBitsLength=function(){return Q.getBitsLength(this.data.length)};Q.prototype.write=function(e){let n,r,o;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),o=parseInt(r,10),e.put(o,10);const s=this.data.length-n;s>0&&(r=this.data.substr(n),o=parseInt(r,10),e.put(o,s*3+1))};var Dn=Q;const Fn=j,Dt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function X(t){this.mode=Fn.ALPHANUMERIC,this.data=t}X.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};X.prototype.getLength=function(){return this.data.length};X.prototype.getBitsLength=function(){return X.getBitsLength(this.data.length)};X.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Dt.indexOf(this.data[n])*45;r+=Dt.indexOf(this.data[n+1]),e.put(r,11)}this.data.length%2&&e.put(Dt.indexOf(this.data[n]),6)};var Un=X,$n=function(e){for(var n=[],r=e.length,o=0;o<r;o++){var s=e.charCodeAt(o);if(s>=55296&&s<=56319&&r>o+1){var i=e.charCodeAt(o+1);i>=56320&&i<=57343&&(s=(s-55296)*1024+i-56320+65536,o+=1)}if(s<128){n.push(s);continue}if(s<2048){n.push(s>>6|192),n.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128);continue}if(s>=65536&&s<=1114111){n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(s&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const zn=$n,Vn=j;function W(t){this.mode=Vn.BYTE,this.data=new Uint8Array(zn(t))}W.getBitsLength=function(e){return e*8};W.prototype.getLength=function(){return this.data.length};W.prototype.getBitsLength=function(){return W.getBitsLength(this.data.length)};W.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var On=W;const Hn=j,Kn=R;function Z(t){this.mode=Hn.KANJI,this.data=t}Z.getBitsLength=function(e){return e*13};Z.prototype.getLength=function(){return this.data.length};Z.prototype.getBitsLength=function(){return Z.getBitsLength(this.data.length)};Z.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=Kn.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var Jn=Z,Ce={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,r,o){var s={},i={};i[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var u,c,h,y,p,l,f,v,S;!a.empty();){u=a.pop(),c=u.value,y=u.cost,p=n[c]||{};for(h in p)p.hasOwnProperty(h)&&(l=p[h],f=y+l,v=i[h],S=typeof i[h]=="undefined",(S||v>f)&&(i[h]=f,a.push(h,f),s[h]=c))}if(typeof o!="undefined"&&typeof i[o]=="undefined"){var w=["Could not find a path from ",r," to ",o,"."].join("");throw new Error(w)}return s},extract_shortest_path_from_predecessor_list:function(n,r){for(var o=[],s=r;s;)o.push(s),s=n[s];return o.reverse(),o},find_path:function(n,r,o){var s=e.single_source_shortest_paths(n,r,o);return e.extract_shortest_path_from_predecessor_list(s,o)},PriorityQueue:{make:function(n){var r=e.PriorityQueue,o={},s;n=n||{};for(s in r)r.hasOwnProperty(s)&&(o[s]=r[s]);return o.queue=[],o.sorter=n.sorter||r.default_sorter,o},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var o={value:n,cost:r};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(Ce);(function(t){const e=j,n=Dn,r=Un,o=On,s=Jn,i=V,a=R,u=Ce.exports;function c(w){return unescape(encodeURIComponent(w)).length}function h(w,E,g){const m=[];let b;for(;(b=w.exec(g))!==null;)m.push({data:b[0],index:b.index,mode:E,length:b[0].length});return m}function y(w){const E=h(i.NUMERIC,e.NUMERIC,w),g=h(i.ALPHANUMERIC,e.ALPHANUMERIC,w);let m,b;return a.isKanjiModeEnabled()?(m=h(i.BYTE,e.BYTE,w),b=h(i.KANJI,e.KANJI,w)):(m=h(i.BYTE_KANJI,e.BYTE,w),b=[]),E.concat(g,m,b).sort(function(_,I){return _.index-I.index}).map(function(_){return{data:_.data,mode:_.mode,length:_.length}})}function p(w,E){switch(E){case e.NUMERIC:return n.getBitsLength(w);case e.ALPHANUMERIC:return r.getBitsLength(w);case e.KANJI:return s.getBitsLength(w);case e.BYTE:return o.getBitsLength(w)}}function l(w){return w.reduce(function(E,g){const m=E.length-1>=0?E[E.length-1]:null;return m&&m.mode===g.mode?(E[E.length-1].data+=g.data,E):(E.push(g),E)},[])}function f(w){const E=[];for(let g=0;g<w.length;g++){const m=w[g];switch(m.mode){case e.NUMERIC:E.push([m,{data:m.data,mode:e.ALPHANUMERIC,length:m.length},{data:m.data,mode:e.BYTE,length:m.length}]);break;case e.ALPHANUMERIC:E.push([m,{data:m.data,mode:e.BYTE,length:m.length}]);break;case e.KANJI:E.push([m,{data:m.data,mode:e.BYTE,length:c(m.data)}]);break;case e.BYTE:E.push([{data:m.data,mode:e.BYTE,length:c(m.data)}])}}return E}function v(w,E){const g={},m={start:{}};let b=["start"];for(let d=0;d<w.length;d++){const _=w[d],I=[];for(let L=0;L<_.length;L++){const A=_[L],k=""+d+L;I.push(k),g[k]={node:A,lastCount:0},m[k]={};for(let D=0;D<b.length;D++){const N=b[D];g[N]&&g[N].node.mode===A.mode?(m[N][k]=p(g[N].lastCount+A.length,A.mode)-p(g[N].lastCount,A.mode),g[N].lastCount+=A.length):(g[N]&&(g[N].lastCount=A.length),m[N][k]=p(A.length,A.mode)+4+e.getCharCountIndicator(A.mode,E))}}b=I}for(let d=0;d<b.length;d++)m[b[d]].end=0;return{map:m,table:g}}function S(w,E){let g;const m=e.getBestModeForData(w);if(g=e.from(E,m),g!==e.BYTE&&g.bit<m.bit)throw new Error('"'+w+'" cannot be encoded with mode '+e.toString(g)+`.
 Suggested mode is: `+e.toString(m));switch(g===e.KANJI&&!a.isKanjiModeEnabled()&&(g=e.BYTE),g){case e.NUMERIC:return new n(w);case e.ALPHANUMERIC:return new r(w);case e.KANJI:return new s(w);case e.BYTE:return new o(w)}}t.fromArray=function(E){return E.reduce(function(g,m){return typeof m=="string"?g.push(S(m,null)):m.data&&g.push(S(m.data,m.mode)),g},[])},t.fromString=function(E,g){const m=y(E,a.isKanjiModeEnabled()),b=f(m),d=v(b,g),_=u.find_path(d.map,"start","end"),I=[];for(let L=1;L<_.length-1;L++)I.push(d.table[_[L]].node);return t.fromArray(l(I))},t.rawSplit=function(E){return t.fromArray(y(E,a.isKanjiModeEnabled()))}})(Ee);const Et=R,Ft=mt,Yn=Mn,jn=Pn,qn=ce,Gn=he,Ut=fe,$t=pt,Qn=An,Ct=pe,Xn=ye,Wn=j,zt=Ee;function Zn(t,e){const n=t.size,r=Gn.getPositions(e);for(let o=0;o<r.length;o++){const s=r[o][0],i=r[o][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||n<=s+a))for(let u=-1;u<=7;u++)i+u<=-1||n<=i+u||(a>=0&&a<=6&&(u===0||u===6)||u>=0&&u<=6&&(a===0||a===6)||a>=2&&a<=4&&u>=2&&u<=4?t.set(s+a,i+u,!0,!0):t.set(s+a,i+u,!1,!0))}}function tr(t){const e=t.size;for(let n=8;n<e-8;n++){const r=n%2==0;t.set(n,6,r,!0),t.set(6,n,r,!0)}}function er(t,e){const n=qn.getPositions(e);for(let r=0;r<n.length;r++){const o=n[r][0],s=n[r][1];for(let i=-2;i<=2;i++)for(let a=-2;a<=2;a++)i===-2||i===2||a===-2||a===2||i===0&&a===0?t.set(o+i,s+a,!0,!0):t.set(o+i,s+a,!1,!0)}}function nr(t,e){const n=t.size,r=Ct.getEncodedBits(e);let o,s,i;for(let a=0;a<18;a++)o=Math.floor(a/3),s=a%3+n-8-3,i=(r>>a&1)==1,t.set(o,s,i,!0),t.set(s,o,i,!0)}function Vt(t,e,n){const r=t.size,o=Xn.getEncodedBits(e,n);let s,i;for(s=0;s<15;s++)i=(o>>s&1)==1,s<6?t.set(s,8,i,!0):s<8?t.set(s+1,8,i,!0):t.set(r-15+s,8,i,!0),s<8?t.set(8,r-s-1,i,!0):s<9?t.set(8,15-s-1+1,i,!0):t.set(8,15-s-1,i,!0);t.set(r-8,8,1,!0)}function rr(t,e){const n=t.size;let r=-1,o=n-1,s=7,i=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let u=0;u<2;u++)if(!t.isReserved(o,a-u)){let c=!1;i<e.length&&(c=(e[i]>>>s&1)==1),t.set(o,a-u,c),s--,s===-1&&(i++,s=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}function or(t,e,n){const r=new Yn;n.forEach(function(u){r.put(u.mode.bit,4),r.put(u.getLength(),Wn.getCharCountIndicator(u.mode,t)),u.write(r)});const o=Et.getSymbolTotalCodewords(t),s=$t.getTotalCodewordsCount(t,e),i=(o-s)*8;for(r.getLengthInBits()+4<=i&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const a=(i-r.getLengthInBits())/8;for(let u=0;u<a;u++)r.put(u%2?17:236,8);return sr(r,t,e)}function sr(t,e,n){const r=Et.getSymbolTotalCodewords(e),o=$t.getTotalCodewordsCount(e,n),s=r-o,i=$t.getBlocksCount(e,n),a=r%i,u=i-a,c=Math.floor(r/i),h=Math.floor(s/i),y=h+1,p=c-h,l=new Qn(p);let f=0;const v=new Array(i),S=new Array(i);let w=0;const E=new Uint8Array(t.buffer);for(let _=0;_<i;_++){const I=_<u?h:y;v[_]=E.slice(f,f+I),S[_]=l.encode(v[_]),f+=I,w=Math.max(w,I)}const g=new Uint8Array(r);let m=0,b,d;for(b=0;b<w;b++)for(d=0;d<i;d++)b<v[d].length&&(g[m++]=v[d][b]);for(b=0;b<p;b++)for(d=0;d<i;d++)g[m++]=S[d][b];return g}function ir(t,e,n,r){let o;if(Array.isArray(t))o=zt.fromArray(t);else if(typeof t=="string"){let c=e;if(!c){const h=zt.rawSplit(t);c=Ct.getBestVersionForData(h,n)}o=zt.fromString(t,c||40)}else throw new Error("Invalid data");const s=Ct.getBestVersionForData(o,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const i=or(e,n,o),a=Et.getSymbolSize(e),u=new jn(a);return Zn(u,e),tr(u),er(u,e),Vt(u,n,0),e>=7&&nr(u,e),rr(u,i),isNaN(r)&&(r=Ut.getBestMask(u,Vt.bind(null,u,n))),Ut.applyMask(r,u),Vt(u,n,r),{modules:u,version:e,errorCorrectionLevel:n,maskPattern:r,segments:o}}ue.create=function(e,n){if(typeof e=="undefined"||e==="")throw new Error("No input text");let r=Ft.M,o,s;return typeof n!="undefined"&&(r=Ft.from(n.errorCorrectionLevel,Ft.M),o=Ct.from(n.version),s=Ut.from(n.maskPattern),n.toSJISFunc&&Et.setToSJISFunction(n.toSJISFunc)),ir(e,o,r,s)};var _e={},Ot={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const o=parseInt(r.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+r.slice(0,6).join("")}}t.getOptions=function(r){r||(r={}),r.color||(r.color={});const o=typeof r.margin=="undefined"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,i=r.scale||4;return{width:s,scale:s?4:i,margin:o,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},t.getScale=function(r,o){return o.width&&o.width>=r+o.margin*2?o.width/(r+o.margin*2):o.scale},t.getImageWidth=function(r,o){const s=t.getScale(r,o);return Math.floor((r+o.margin*2)*s)},t.qrToImageData=function(r,o,s){const i=o.modules.size,a=o.modules.data,u=t.getScale(i,s),c=Math.floor((i+s.margin*2)*u),h=s.margin*u,y=[s.color.light,s.color.dark];for(let p=0;p<c;p++)for(let l=0;l<c;l++){let f=(p*c+l)*4,v=s.color.light;if(p>=h&&l>=h&&p<c-h&&l<c-h){const S=Math.floor((p-h)/u),w=Math.floor((l-h)/u);v=y[a[S*i+w]?1:0]}r[f++]=v.r,r[f++]=v.g,r[f++]=v.b,r[f]=v.a}}})(Ot);(function(t){const e=Ot;function n(o,s,i){o.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=i,s.width=i,s.style.height=i+"px",s.style.width=i+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,i,a){let u=a,c=i;typeof u=="undefined"&&(!i||!i.getContext)&&(u=i,i=void 0),i||(c=r()),u=e.getOptions(u);const h=e.getImageWidth(s.modules.size,u),y=c.getContext("2d"),p=y.createImageData(h,h);return e.qrToImageData(p.data,s,u),n(y,c,h),y.putImageData(p,0,0),c},t.renderToDataURL=function(s,i,a){let u=a;typeof u=="undefined"&&(!i||!i.getContext)&&(u=i,i=void 0),u||(u={});const c=t.render(s,i,u),h=u.type||"image/png",y=u.rendererOpts||{};return c.toDataURL(h,y.quality)}})(_e);var Se={};const ar=Ot;function Me(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Ht(t,e,n){let r=t+e;return typeof n!="undefined"&&(r+=" "+n),r}function ur(t,e,n){let r="",o=0,s=!1,i=0;for(let a=0;a<t.length;a++){const u=Math.floor(a%e),c=Math.floor(a/e);!u&&!s&&(s=!0),t[a]?(i++,a>0&&u>0&&t[a-1]||(r+=s?Ht("M",u+n,.5+c+n):Ht("m",o,0),o=0,s=!1),u+1<e&&t[a+1]||(r+=Ht("h",i),i=0)):o++}return r}Se.render=function(e,n,r){const o=ar.getOptions(n),s=e.modules.size,i=e.modules.data,a=s+o.margin*2,u=o.color.light.a?"<path "+Me(o.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+Me(o.color.dark,"stroke")+' d="'+ur(i,s,o.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',y=o.width?'width="'+o.width+'" height="'+o.width+'" ':"",p='<svg xmlns="http://www.w3.org/2000/svg" '+y+h+' shape-rendering="crispEdges">'+u+c+`</svg>
`;return typeof r=="function"&&r(null,p),p};const lr=_n,Pe=ue,Be=_e,cr=Se;function Kt(t,e,n,r,o){const s=[].slice.call(arguments,1),i=s.length,a=typeof s[i-1]=="function";if(!a&&!lr())throw new Error("Callback required as last argument");if(a){if(i<2)throw new Error("Too few arguments provided");i===2?(o=n,n=e,e=r=void 0):i===3&&(e.getContext&&typeof o=="undefined"?(o=r,r=void 0):(o=r,r=n,n=e,e=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(n=e,e=r=void 0):i===2&&!e.getContext&&(r=n,n=e,e=void 0),new Promise(function(u,c){try{const h=Pe.create(n,r);u(t(h,e,r))}catch(h){c(h)}})}try{const u=Pe.create(n,r);o(null,t(u,e,r))}catch(u){o(u)}}Kt.bind(null,Be.render);Kt.bind(null,Be.renderToDataURL);Kt.bind(null,function(t,e,n){return cr.render(t,n)});var hr=Object.defineProperty,Ae=Object.getOwnPropertySymbols,dr=Object.prototype.hasOwnProperty,fr=Object.prototype.propertyIsEnumerable,Ne=(t,e,n)=>e in t?hr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gr=(t,e)=>{for(var n in e||(e={}))dr.call(e,n)&&Ne(t,n,e[n]);if(Ae)for(var n of Ae(e))fr.call(e,n)&&Ne(t,n,e[n]);return t};function mr(t,e){const n=U();let r=[];const o=rt(),s=rt(),i=rt(),a=rt(),u=rt(),c=U(!1),h=U(!1),y=U(!1),p=U(!1),l=U({color:"black",size:3,arrowEnd:!1,cornerRadius:0,dasharray:void 0,fill:"transparent",mode:"draw"});Pt(l,()=>{const d=n.value;d&&(d.brush=l.value)},{deep:!0});const f=()=>{var d;return(d=n.value)==null?void 0:d.undo()},v=()=>{var d;return(d=n.value)==null?void 0:d.redo()},S=()=>{var d;return(d=n.value)==null?void 0:d.clear()},w=()=>{var d;return(d=n.value)==null?void 0:d.cancel()},E=d=>{var _;return(_=n.value)==null?void 0:_.load(d)},g=()=>{var d;return(d=n.value)==null?void 0:d.dump()},m=()=>{var d;r.forEach(_=>_()),(d=n.value)==null||d.unmount()},b=()=>{n.value&&(c.value=n.value.canUndo(),h.value=n.value.canRedo(),y.value=n.value.altPressed,p.value=n.value.shiftPressed)};return Pt(()=>Ve(t),d=>{!d||!(d instanceof SVGSVGElement)||(n.value&&m(),n.value=Cn(gr({el:d},e)),b(),r=[n.value.on("canceled",()=>s.trigger()),n.value.on("committed",()=>i.trigger()),n.value.on("start",()=>a.trigger()),n.value.on("end",()=>u.trigger()),n.value.on("changed",()=>{b(),o.trigger()})])},{flush:"post"}),Le(()=>m()),{drauuInstance:n,load:E,dump:g,clear:S,cancel:w,undo:f,redo:v,canUndo:c,canRedo:h,brush:l,onChanged:o.on,onCommitted:i.on,onStart:a.on,onEnd:u.on,onCanceled:s.on}}const pr={flex:"~ col",place:"items-center"},wr={shadow:"~ lg",class:"drauu-demo",border:"rounded",overflow:"hidden","max-w":"screen-lg",h:"[60vh]",w:"full",flex:"~ col"},yr={bg:"$c-bg",border:"b-1 $c-divider",flex:"~ row",items:"center",p:"2",space:"x-4"},vr={flex:"~ row 1"},br=["onClick"],Er={flex:"~ row 1 shrink-1",items:"center",w:"full","max-w":"64"},Cr={flex:"~ row 1",justify:"end"},_r=["disabled"],Sr=["disabled"],Mr={flex:"~ row 1",h:"72"},Pr={bg:"$c-bg",border:"r-1",flex:"~ col",space:"y-2",place:"items-center",p:"2"},Nr=qt({setup(t){const e=U(["black","#ef4444","#22c55e","#3b82f6"]),n=U(),{undo:r,redo:o,canUndo:s,canRedo:i,clear:a,brush:u}=mr(n,{brush:{color:"black",size:3}}),{mode:c,color:h,size:y}=ke(u);return(p,l)=>{const f=J("carbon-paint-brush"),v=J("carbon-undo"),S=J("carbon-redo"),w=J("carbon-clean"),E=J("carbon-pen"),g=J("mdi-slash-forward"),m=J("carbon-checkbox"),b=J("mdi-light-shape-circle");return et(),nt("div",pr,[B("div",wr,[B("div",yr,[B("div",vr,[(et(!0),nt(Re,null,De(e.value,d=>(et(),nt("button",{key:d,class:q([{active:d===x(h)},"color-button"]),m:"r-1",onClick:()=>h.value=d},[B("div",{style:Bt({background:d}),w:"6",h:"6",border:"2 dark:(light-900 opacity-50) rounded-full"},null,4)],10,br))),128))]),B("div",Er,[O(f,{m:"r-2"}),O(He,{modelValue:x(y),"onUpdate:modelValue":l[0]||(l[0]=d=>Fe(y)?y.value=d:null),w:"full",min:1,max:10},null,8,["modelValue"])]),B("div",Cr,[B("button",{class:"tool-button",disabled:!x(s),onClick:l[1]||(l[1]=d=>x(r)())},[O(v)],8,_r),B("button",{class:"tool-button",disabled:!x(i),onClick:l[2]||(l[2]=d=>x(o)())},[O(S)],8,Sr),B("button",{class:"tool-button",onClick:l[3]||(l[3]=d=>x(a)())},[O(w)])])]),B("div",Mr,[B("div",Pr,[B("button",{class:q([{active:x(u).mode==="draw"},"tool-button"]),onClick:l[4]||(l[4]=d=>c.value="draw")},[O(E)],2),B("button",{class:q([{active:x(u).mode==="line"&&!x(u).arrowEnd},"tool-button"]),onClick:l[5]||(l[5]=d=>c.value="line")},[O(g)],2),B("button",{class:q([{active:x(u).mode==="rectangle"},"tool-button"]),onClick:l[6]||(l[6]=d=>c.value="rectangle")},[O(m)],2),B("button",{class:q([{active:x(u).mode==="ellipse"},"tool-button"]),onClick:l[7]||(l[7]=d=>c.value="ellipse")},[O(b)],2)]),(et(),nt("svg",{ref_key:"target",ref:n,w:"full",h:"full",bg:"white"},null,512))])])])}}});export{Nr as default};
